<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-–§–µ—Ä–º–∞</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #87CEEB;
            font-family: Arial, sans-serif;
            touch-action: manipulation;
        }
        #game {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            position: relative;
            height: 500px;
            background-color: #6B8E23;
            overflow: hidden;
        }
        #ui {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-around;
        }
        button {
            background-color: #FFA500;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }
        #inventory {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 8px;
            border-radius: 8px;
            z-index: 100;
        }
        .plant {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #228B22;
            border-radius: 50%;
            transform-origin: bottom center;
        }
        .chicken {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: white;
            border-radius: 50%;
        }
        .egg {
            position: absolute;
            width: 10px;
            height: 14px;
            background-color: #F5F5DC;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div id="inventory">
        ü™ô: <span id="coins">50</span> | üåæ: <span id="wheat">0</span> | ü•ö: <span id="eggs">0</span>
    </div>
    <div id="game"></div>
    <div id="ui">
        <button id="plant">üå± –ü–æ—Å–∞–¥–∏—Ç—å (10ü™ô)</button>
        <button id="chicken">üêî –ö—É—Ä–∏—Ü–∞ (30ü™ô)</button>
        <button id="sell">üí∞ –ü—Ä–æ–¥–∞—Ç—å</button>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const game = {
            coins: 50,
            wheat: 0,
            eggs: 0,
            plants: [],
            chickens: []
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function loadGame() {
            const saved = localStorage.getItem('farmGame');
            if (saved) {
                const data = JSON.parse(saved);
                game.coins = data.coins || 50;
                game.wheat = data.wheat || 0;
                game.eggs = data.eggs || 0;
                updateUI();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            localStorage.setItem('farmGame', JSON.stringify({
                coins: game.coins,
                wheat: game.wheat,
                eggs: game.eggs
            }));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('coins').textContent = game.coins;
            document.getElementById('wheat').textContent = game.wheat;
            document.getElementById('eggs').textContent = game.eggs;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è
        function createPlant() {
            if (game.coins < 10) {
                alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç!');
                return;
            }
            
            game.coins -= 10;
            const plant = document.createElement('div');
            plant.className = 'plant';
            plant.style.left = Math.random() * 80 + 10 + '%';
            plant.style.bottom = '100px';
            plant.style.transform = 'scale(0.3)';
            plant.dataset.growth = 0;
            plant.dataset.ready = 'false';
            
            document.getElementById('game').appendChild(plant);
            game.plants.push(plant);
            
            // –†–æ—Å—Ç —Ä–∞—Å—Ç–µ–Ω–∏—è
            const growInterval = setInterval(() => {
                const growth = parseFloat(plant.dataset.growth) + 0.01;
                plant.dataset.growth = growth;
                plant.style.transform = `scale(${0.3 + growth * 0.7})`;
                
                if (growth >= 1) {
                    plant.dataset.ready = 'true';
                    plant.style.backgroundColor = '#DAA520';
                    clearInterval(growInterval);
                }
            }, 1000);
            
            updateUI();
            saveGame();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä–∏—Ü—ã
        function createChicken() {
            if (game.coins < 30) {
                alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç!');
                return;
            }
            
            game.coins -= 30;
            const chicken = document.createElement('div');
            chicken.className = 'chicken';
            chicken.style.left = Math.random() * 80 + 10 + '%';
            chicken.style.bottom = '100px';
            chicken.dataset.lastEgg = Date.now();
            
            // –ì—Ä–µ–±–µ–Ω—å –∫—É—Ä–∏—Ü—ã
            const comb = document.createElement('div');
            comb.style.position = 'absolute';
            comb.style.right = '-5px';
            comb.style.top = '5px';
            comb.style.width = '8px';
            comb.style.height = '5px';
            comb.style.backgroundColor = 'red';
            comb.style.borderRadius = '50%';
            chicken.appendChild(comb);
            
            document.getElementById('game').appendChild(chicken);
            game.chickens.push(chicken);
            
            // –î–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä–∏—Ü—ã
            let direction = Math.random() > 0.5 ? 1 : -1;
            setInterval(() => {
                const left = parseFloat(chicken.style.left);
                if (left < 10 || left > 90) direction *= -1;
                chicken.style.left = (left + direction * 0.3) + '%';
            }, 100);
            
            updateUI();
            saveGame();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —è–π—Ü–∞
        function createEgg(chicken) {
            const egg = document.createElement('div');
            egg.className = 'egg';
            egg.style.left = chicken.style.left;
            egg.style.bottom = '90px';
            document.getElementById('game').appendChild(egg);
            
            game.eggs++;
            updateUI();
            saveGame();
            
            setTimeout(() => {
                egg.remove();
            }, 3000);
        }

        // –ü—Ä–æ–¥–∞–∂–∞ —É—Ä–æ–∂–∞—è
        function sellProducts() {
            let harvested = 0;
            
            // –°–±–æ—Ä —Ä–∞—Å—Ç–µ–Ω–∏–π
            game.plants = game.plants.filter(plant => {
                if (plant.dataset.ready === 'true') {
                    harvested++;
                    plant.remove();
                    return false;
                }
                return true;
            });
            
            // –ü—Ä–æ–¥–∞–∂–∞
            game.coins += harvested * 5;
            game.coins += game.eggs * 3;
            game.wheat += harvested;
            game.eggs = 0;
            
            updateUI();
            saveGame();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('plant').addEventListener('click', createPlant);
        document.getElementById('chicken').addEventListener('click', createChicken);
        document.getElementById('sell').addEventListener('click', sellProducts);

        // –ö–ª–∏–∫ –ø–æ —Ä–∞—Å—Ç–µ–Ω–∏—è–º –¥–ª—è —Å–±–æ—Ä–∞
        document.getElementById('game').addEventListener('click', (e) => {
            if (e.target.classList.contains('plant') && e.target.dataset.ready === 'true') {
                e.target.remove();
                game.plants = game.plants.filter(p => p !== e.target);
                game.wheat++;
                updateUI();
                saveGame();
            }
        });

        // –Ø–π—Ü–∞ –æ—Ç –∫—É—Ä
        setInterval(() => {
            game.chickens.forEach(chicken => {
                if (Date.now() - chicken.dataset.lastEgg > 15000) {
                    chicken.dataset.lastEgg = Date.now();
                    createEgg(chicken);
                }
            });
        }, 1000);

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        loadGame();
        updateUI();
    </script>
</body>
</html>
