<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–µ—Ä–º–∞ 2D</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e0f7fa;
            color: #333;
        }
        #menu, #game {
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #farm {
            min-height: 200px;
            margin: 20px 0;
            padding: 15px;
            background-color: #81C784;
            border-radius: 8px;
            position: relative;
        }
        .plant {
            width: 30px;
            height: 30px;
            background-color: #4CAF50;
            border-radius: 50%;
            display: inline-block;
            margin: 5px;
            transition: transform 0.3s;
            position: absolute;
        }
        .chicken {
            font-size: 24px;
            position: absolute;
        }
        .stats {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .tab {
            display: none;
        }
        .active-tab {
            display: block;
        }
        #tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }
        .tab-btn {
            background-color: #ddd;
            color: #333;
        }
        .tab-btn.active {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="menu">
        <h1>–§–µ—Ä–º–∞ 2D</h1>
        <div class="stats">
            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞</h3>
            <p>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="total-earned">0</span> ü™ô</p>
            <p>–í—ã—Ä–∞—â–µ–Ω–æ —Ä–∞—Å—Ç–µ–Ω–∏–π: <span id="total-plants">0</span> üåæ</p>
            <p>–°–æ–±—Ä–∞–Ω–æ —è–∏—Ü: <span id="total-eggs">0</span> ü•ö</p>
        </div>
        <button id="start-game">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button id="reset-game">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="game" class="tab">
        <div id="tabs">
            <button class="tab-btn active" data-tab="farm-tab">–§–µ—Ä–º–∞</button>
            <button class="tab-btn" data-tab="stats-tab">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        </div>

        <div id="farm-tab" class="active-tab tab">
            <h2>–í–∞—à–∞ —Ñ–µ—Ä–º–∞</h2>
            <div id="farm"></div>
            
            <div class="stats">
                <p>ü™ô: <span id="coins">50</span> | üåæ: <span id="wheat">0</span> | ü•ö: <span id="eggs">0</span></p>
            </div>
            
            <button id="plant-btn">üå± –ü–æ—Å–∞–¥–∏—Ç—å (10ü™ô)</button>
            <button id="chicken-btn">üêî –ö—É–ø–∏—Ç—å –∫—É—Ä–∏—Ü—É (30ü™ô)</button>
            <button id="sell-btn">üí∞ –ü—Ä–æ–¥–∞—Ç—å —É—Ä–æ–∂–∞–π</button>
            <button id="menu-btn">–í –º–µ–Ω—é</button>
        </div>

        <div id="stats-tab" class="tab">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats">
                <p>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="game-total-earned">0</span> ü™ô</p>
                <p>–í—ã—Ä–∞—â–µ–Ω–æ —Ä–∞—Å—Ç–µ–Ω–∏–π: <span id="game-total-plants">0</span> üåæ</p>
                <p>–°–æ–±—Ä–∞–Ω–æ —è–∏—Ü: <span id="game-total-eggs">0</span> ü•ö</p>
                <p>–ö—É–ø–∏–ª–∏ –∫—É—Ä–∏—Ü: <span id="total-chickens">0</span> üêî</p>
                <p>–í—Ä–µ–º—è –∏–≥—Ä—ã: <span id="play-time">0</span> –º–∏–Ω</p>
            </div>
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const gameState = {
            coins: 50,
            wheat: 0,
            eggs: 0,
            plants: [],
            chickens: [],
            stats: {
                totalEarned: 0,
                totalPlants: 0,
                totalEggs: 0,
                totalChickens: 0,
                playTime: 0
            },
            lastUpdate: Date.now()
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const menuScreen = document.getElementById('menu');
        const gameScreen = document.getElementById('game');
        const farmArea = document.getElementById('farm');
        let gameInterval;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            setupEventListeners();
            updateUI();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            gameInterval = setInterval(gameLoop, 1000);
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            const now = Date.now();
            const deltaTime = (now - gameState.lastUpdate) / 1000; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
            gameState.lastUpdate = now;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∏–≥—Ä—ã (–≤ –º–∏–Ω—É—Ç–∞—Ö)
            gameState.stats.playTime += deltaTime / 60;
            
            // –ö—É—Ä–∏—Ü—ã –Ω–µ—Å—É—Ç —è–π—Ü–∞
            gameState.chickens.forEach(chicken => {
                chicken.timeSinceLastEgg += deltaTime;
                if (chicken.timeSinceLastEgg >= 10) { // –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
                    gameState.eggs++;
                    gameState.stats.totalEggs++;
                    chicken.timeSinceLastEgg = 0;
                    updateUI();
                }
            });
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            if (gameState.stats.playTime % 0.5 < deltaTime / 60) {
                saveGame();
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedGame = localStorage.getItem('farmGameSave');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                Object.assign(gameState, parsed);
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞—Å—Ç–µ–Ω–∏—è
                gameState.plants.forEach(plant => {
                    createPlantElement(plant.x, plant.y, plant.isReady);
                });
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä–∏—Ü
                gameState.chickens.forEach(chicken => {
                    createChickenElement(chicken.x, chicken.y);
                });
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            const saveData = {
                coins: gameState.coins,
                wheat: gameState.wheat,
                eggs: gameState.eggs,
                plants: gameState.plants.map(plant => ({
                    x: plant.x,
                    y: plant.y,
                    isReady: plant.isReady
                })),
                chickens: gameState.chickens.map(chicken => ({
                    x: chicken.x,
                    y: chicken.y,
                    timeSinceLastEgg: chicken.timeSinceLastEgg
                })),
                stats: gameState.stats
            };
            
            localStorage.setItem('farmGameSave', JSON.stringify(saveData));
            console.log('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è
        function addPlant() {
            if (gameState.coins < 10) {
                alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç!');
                return;
            }
            
            gameState.coins -= 10;
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 60 + 20;
            
            const plant = {
                x: x,
                y: y,
                isReady: false,
                element: null
            };
            
            gameState.plants.push(plant);
            createPlantElement(x, y, false);
            
            // –†–∞—Å—Ç–µ–Ω–∏–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                plant.isReady = true;
                if (plant.element) {
                    plant.element.style.backgroundColor = '#FFD700';
                    plant.element.style.transform = 'scale(1.2)';
                }
            }, 30000);
            
            updateUI();
        }

        function createPlantElement(x, y, isReady) {
            const plantEl = document.createElement('div');
            plantEl.className = 'plant';
            plantEl.style.left = `${x}%`;
            plantEl.style.top = `${y}%`;
            plantEl.style.transform = isReady ? 'scale(1.2)' : 'scale(0.7)';
            plantEl.style.backgroundColor = isReady ? '#FFD700' : '#4CAF50';
            
            plantEl.addEventListener('click', () => {
                if (isReady) {
                    harvestPlant(plantEl);
                }
            });
            
            farmArea.appendChild(plantEl);
            return plantEl;
        }

        // –ü–æ–∫—É–ø–∫–∞ –∫—É—Ä–∏—Ü—ã
        function addChicken() {
            if (gameState.coins < 30) {
                alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç!');
                return;
            }
            
            gameState.coins -= 30;
            gameState.stats.totalChickens++;
            
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 60 + 20;
            
            const chicken = {
                x: x,
                y: y,
                timeSinceLastEgg: 0,
                element: null
            };
            
            gameState.chickens.push(chicken);
            createChickenElement(x, y);
            
            updateUI();
        }

        function createChickenElement(x, y) {
            const chickenEl = document.createElement('div');
            chickenEl.className = 'chicken';
            chickenEl.textContent = 'üêî';
            chickenEl.style.left = `${x}%`;
            chickenEl.style.top = `${y}%`;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
            let direction = Math.random() > 0.5 ? 1 : -1;
            setInterval(() => {
                const currentX = parseFloat(chickenEl.style.left);
                const newX = currentX + direction * 0.3;
                
                if (newX < 5 || newX > 95) {
                    direction *= -1;
                }
                
                chickenEl.style.left = `${newX}%`;
            }, 100);
            
            farmArea.appendChild(chickenEl);
            return chickenEl;
        }

        // –°–±–æ—Ä —Ä–∞—Å—Ç–µ–Ω–∏—è
        function harvestPlant(plantEl) {
            gameState.wheat++;
            gameState.stats.totalPlants++;
            
            const index = gameState.plants.findIndex(p => p.element === plantEl);
            if (index !== -1) {
                gameState.plants.splice(index, 1);
            }
            
            plantEl.remove();
            updateUI();
        }

        // –ü—Ä–æ–¥–∞–∂–∞ —É—Ä–æ–∂–∞—è
        function sellHarvest() {
            const wheatValue = gameState.wheat * 3;
            const eggsValue = gameState.eggs * 2;
            const total = wheatValue + eggsValue;
            
            if (total === 0) {
                alert('–ù–µ—á–µ–≥–æ –ø—Ä–æ–¥–∞–≤–∞—Ç—å!');
                return;
            }
            
            gameState.coins += total;
            gameState.stats.totalEarned += total;
            gameState.wheat = 0;
            gameState.eggs = 0;
            
            updateUI();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –ú–µ–Ω—é
            document.getElementById('total-earned').textContent = gameState.stats.totalEarned;
            document.getElementById('total-plants').textContent = gameState.stats.totalPlants;
            document.getElementById('total-eggs').textContent = gameState.stats.totalEggs;
            
            // –ò–≥—Ä–∞
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('wheat').textContent = gameState.wheat;
            document.getElementById('eggs').textContent = gameState.eggs;
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –∏–≥—Ä–µ
            document.getElementById('game-total-earned').textContent = gameState.stats.totalEarned;
            document.getElementById('game-total-plants').textContent = gameState.stats.totalPlants;
            document.getElementById('game-total-eggs').textContent = gameState.stats.totalEggs;
            document.getElementById('total-chickens').textContent = gameState.stats.totalChickens;
            document.getElementById('play-time').textContent = Math.floor(gameState.stats.playTime);
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é
            document.getElementById('start-game').addEventListener('click', () => {
                menuScreen.style.display = 'none';
                gameScreen.style.display = 'block';
            });
            
            document.getElementById('reset-game').addEventListener('click', () => {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω!')) {
                    localStorage.removeItem('farmGameSave');
                    location.reload();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∏ –∏–≥—Ä—ã
            document.getElementById('plant-btn').addEventListener('click', addPlant);
            document.getElementById('chicken-btn').addEventListener('click', addChicken);
            document.getElementById('sell-btn').addEventListener('click', sellHarvest);
            document.getElementById('menu-btn').addEventListener('click', () => {
                saveGame();
                menuScreen.style.display = 'block';
                gameScreen.style.display = 'none';
            });
            
            // –í–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active-tab'));
                    
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active-tab');
                });
            });
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        initGame();
    </script>
</body>
</html>
